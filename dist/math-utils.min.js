var math;(()=>{"use strict";var t={363:function(t,e,s){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=s(593),a=i(s(872));e.default=class{constructor(t,e){this.axis=t.normalized(),this.angle=e}static near(t,e,s){return s||(s=r.Epsilon),a.default.near(t.axis,e.axis,s)&&r.near(t.angle,e.angle,s)}rotate(t){return a.default.add(a.default.lerp(this.axis.scale(a.default.dot(this.axis,t)),t,Math.cos(this.angle)),a.default.cross(this.axis,t).scaleSelf(Math.sin(this.angle)))}toString(){return`{ axis:${this.axis.toString()}, angle:${this.angle.toFixed(4)} }`}}},299:function(t,e,s){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=i(s(760));class a extends r.default{constructor(t,e){super(t,e)}static polar(t,e){return new a(t*Math.cos(e),t*Math.sin(e))}static empty(){return new a(0,0)}conjugate(){return new a(this.x,-this.y)}arg(){return Math.atan2(this.y,this.x)}inverse(){let t=this.conjugate(),e=t.squaredLength();return t.scaleSelf(1/e),t}static cMul(t,e){let s=a.empty();return s.x=t.x*e.x-t.y*e.y,s.y=t.y*e.x+t.x*e.y,s}static cDiv(t,e){let s=a.empty(),i=e.squaredLength();return s.x=(t.x*e.x+t.y*e.y)/i,s.y=(t.y*e.x-t.x*e.y)/i,s}static cExp(t){return a.polar(Math.exp(t.x),t.y)}static cLog(t){return new a(Math.log(t.length()),t.arg())}static cPow(t,e){let s=t.arg(),i=Math.log(t.length()),r=Math.exp(e.x*i-e.y*s),h=e.y*i+e.x*s;return a.polar(r,h)}}e.default=a},607:function(t,e,s){var i=this&&this.__createBinding||(Object.create?function(t,e,s,i){void 0===i&&(i=s),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[s]}})}:function(t,e,s,i){void 0===i&&(i=s),t[i]=e[s]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)"default"!==s&&Object.prototype.hasOwnProperty.call(t,s)&&i(e,t,s);return r(e,t),e},h=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.utils=e.transform=e.quat=e.matrix=e.mat4=e.mat3=e.mat2=e.vector=e.vec4=e.vec3=e.vec2=e.complex=e.axisAngle=void 0;const n=h(s(363));e.axisAngle=n.default;const l=h(s(299));e.complex=l.default;const o=h(s(265));e.mat2=o.default;const u=h(s(658));e.mat3=u.default;const g=h(s(768));e.mat4=g.default;const d=h(s(799));e.matrix=d.default;const c=h(s(99));e.quat=c.default;const f=h(s(886));e.transform=f.default;const x=h(s(760));e.vec2=x.default;const m=h(s(872));e.vec3=m.default;const y=h(s(663));e.vec4=y.default;const v=h(s(464));e.vector=v.default;const w=a(s(593));e.utils=w},265:function(t,e,s){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=i(s(658)),a=s(593),h=i(s(760));class n{constructor(t,e,s,i){this.data=[[t,e],[s,i]]}clone(){return new n(this.data[0][0],this.data[0][1],this.data[1][0],this.data[1][1])}set(t,e,s){this.data[t][e]=s}get(t,e){return this.data[t][e]}static near(t,e,s){s||(s=a.Epsilon);for(let i=0;i<3;i++)for(let r=0;r<3;r++)if(Math.abs(t.get(i,r)-e.get(i,r))>s)return!1;return!0}static empty(){return new n(0,0,0,0)}static identity(){return new n(1,0,0,1)}determinant(){return a.determinant2x2(this.data[0][0],this.data[0][1],this.data[1][0],this.data[1][1])}toString(){return`[\n    [${this.get(0,0).toFixed(4)}, ${this.get(0,1).toFixed(4)}]\n    [${this.get(1,0).toFixed(4)}, ${this.get(1,1).toFixed(4)}]\n]`}preMulVec(t){return new h.default(t.x*this.data[0][0]+t.y*this.data[1][0],t.x*this.data[0][1]+t.y*this.data[1][1])}postMulVec(t){return new h.default(t.x*this.data[0][0]+t.y*this.data[0][1],t.x*this.data[1][0]+t.y*this.data[1][1])}static rotation(t){let e=Math.cos(t),s=Math.sin(t);return new n(e,-s,s,e)}toMat3(){return new r.default(this.data[0][0],this.data[0][1],0,this.data[1][0],this.data[1][1],0,0,0,1)}}e.default=n},658:function(t,e,s){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=i(s(363)),a=i(s(265)),h=i(s(768)),n=s(593),l=i(s(872));class o{constructor(t,e,s,i,r,a,h,n,l){this.data=[[t,e,s],[i,r,a],[h,n,l]]}clone(){return new o(this.get(0,0),this.get(0,1),this.get(0,2),this.get(1,0),this.get(1,1),this.get(1,2),this.get(2,0),this.get(2,1),this.get(2,2))}static near(t,e,s){s||(s=n.Epsilon);for(let i=0;i<3;i++)for(let r=0;r<3;r++)if(Math.abs(t.get(i,r)-e.get(i,r))>s)return!1;return!0}static empty(){return new o(0,0,0,0,0,0,0,0,0)}static identity(){return new o(1,0,0,0,1,0,0,0,1)}static fromAxisAngle(t){let e=Math.cos(t.angle),s=Math.sin(t.angle),i=t.axis.x,r=t.axis.y,a=t.axis.z;return new o(e+i*i*(1-e),i*r*(1-e)-a*s,i*a*(1-e)+r*s,r*i*(1-e)+a*s,e+r*r*(1-e),r*a*(1-e)-i*s,a*i*(1-e)-r*s,a*r*(1-e)+i*s,e+a*a*(1-e))}trace(){return this.get(0,0)+this.get(1,1)+this.get(2,2)}toAxisAngle(){let t=this.trace();if(n.near(t,3,n.SmallEpsilon)){let e=new l.default(this.get(2,1)-this.get(1,2),this.get(0,2)-this.get(2,0),this.get(1,0)-this.get(0,1)),s=Math.acos((t-1)/2);return new r.default(e,s)}{let e=new l.default(this.get(2,1)-this.get(1,2),this.get(0,2)-this.get(2,0),this.get(1,0)-this.get(0,1)),s=e.l2norm(),i=Math.atan2(s,t-1);return Math.abs(i)<n.SmallEpsilon&&(e=new l.default(1,0,0)),new r.default(e,i)}}toEulerAngles(){throw new Error("Not implemented")}static yaw(t){let e=Math.cos(t),s=Math.cos(t);return new o(1,0,0,0,e,-s,0,s,e)}static pitch(t){let e=Math.cos(t),s=Math.cos(t);return new o(e,0,s,0,1,0,-s,0,e)}static roll(t){let e=Math.cos(t),s=Math.cos(t);return new o(e,-s,0,s,e,0,0,0,1)}static fromEulerAngles(t,e,s){let i=Math.cos(t),r=Math.sin(t),a=Math.cos(e),h=Math.sin(e),n=Math.cos(s),l=Math.sin(s);return new o(n*a,-l*i+n*h*r,l*r+n*h*i,l*a,n*i+l*h*r,-n*r+l*h*i,-h,a*r,a*i)}set(t,e,s){this.data[t][e]=s}get(t,e){return this.data[t][e]}toQuat(){throw new Error("Not implemented")}toMat4(){return new h.default(this.data[0][0],this.data[0][1],this.data[0][2],0,this.data[1][0],this.data[1][1],this.data[1][2],0,this.data[2][0],this.data[2][1],this.data[2][2],0,0,0,0,1)}static scale(t,e){return t.scale(e)}scale(t,e){e||(e=this.clone());for(let s=0;s<3;s++)for(let i=0;i<3;i++)e.set(s,i,this.get(s,i)*t);return e}scaleSelf(t){return this.scale(t,this)}static mul(t,e){return t.mul(e)}mul(t,e){e||(e=this.clone());for(let s=0;s<3;s++)for(let i=0;i<3;i++){let r=0;r+=this.data[s][0]*t.data[0][i],r+=this.data[s][1]*t.data[1][i],r+=this.data[s][2]*t.data[2][i],e.set(s,i,r)}return e}mulSelf(t){return this.clone().mul(t,this)}determinant(){return this.get(0,0)*(this.get(1,1)*this.get(2,2)-this.get(1,2)*this.get(2,1))-this.get(0,1)*(this.get(1,0)*this.get(2,2)-this.get(2,0)*this.get(1,2))+this.get(0,2)*(this.get(1,0)*this.get(2,1)-this.get(2,0)*this.get(1,1))}static solve(t,e){let s=t.determinant(),i=n.determinant3x3(e.x,t.get(0,1),t.get(0,2),e.y,t.get(1,1),t.get(1,2),e.z,t.get(2,1),t.get(2,2)),r=n.determinant3x3(t.get(0,0),e.x,t.get(0,2),t.get(1,0),e.y,t.get(1,2),t.get(2,0),e.z,t.get(2,2)),a=n.determinant3x3(t.get(0,0),t.get(0,1),e.x,t.get(1,0),t.get(1,1),e.y,t.get(2,0),t.get(2,1),e.z);return new l.default(i/s,r/s,a/s)}inverse(){let t=this.determinant(),e=n.determinant2x2(this.get(1,1),this.get(1,2),this.get(2,1),this.get(2,2)),s=n.determinant2x2(this.get(0,2),this.get(0,1),this.get(2,2),this.get(2,1)),i=n.determinant2x2(this.get(0,1),this.get(0,2),this.get(1,1),this.get(1,2)),r=n.determinant2x2(this.get(1,2),this.get(1,0),this.get(2,2),this.get(2,0)),a=n.determinant2x2(this.get(0,0),this.get(0,2),this.get(2,0),this.get(2,2)),h=n.determinant2x2(this.get(0,2),this.get(0,0),this.get(1,2),this.get(1,0)),l=n.determinant2x2(this.get(1,0),this.get(1,1),this.get(2,0),this.get(2,1)),u=n.determinant2x2(this.get(0,1),this.get(0,0),this.get(2,1),this.get(2,0)),g=n.determinant2x2(this.get(0,0),this.get(0,1),this.get(1,0),this.get(1,1));return new o(e,s,i,r,a,h,l,u,g).scaleSelf(1/t)}transpose(){return new o(this.get(0,0),this.get(1,0),this.get(2,0),this.get(0,1),this.get(1,1),this.get(2,1),this.get(0,2),this.get(1,2),this.get(2,2))}transform(t){let e=[0,0,0];for(let s=0;s<3;s++)e[s]+=this.get(s,0)*t.x,e[s]+=this.get(s,1)*t.y,e[s]+=this.get(s,2)*t.z;return new l.default(e[0],e[1],e[2])}toString(){return`[\n    [${this.get(0,0).toFixed(4)}, ${this.get(0,1).toFixed(4)}, ${this.get(0,2).toFixed(4)}]\n    [${this.get(1,0).toFixed(4)}, ${this.get(1,1).toFixed(4)}, ${this.get(1,2).toFixed(4)}]\n    [${this.get(2,0).toFixed(4)}, ${this.get(2,1).toFixed(4)}, ${this.get(2,2).toFixed(4)}]\n]`}static from2DRotation(t,e=2){let s=Math.cos(t),i=Math.sin(t);n.assert(e>=0&&e<3,"Wrong axis");let r=o.empty(),a=2-e,h=(a+1)%3;return r.set(a,a,s),r.set(a,h,-i),r.set(h,a,i),r.set(h,h,s),r}static fromTRS(t,e,s){throw new Error("Not implemented")}extractMat2(){return new a.default(this.get(0,0),this.get(0,1),this.get(1,0),this.get(1,1))}}e.default=o},768:function(t,e,s){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=i(s(658)),a=i(s(872)),h=s(593),n=i(s(663));class l{constructor(t,e,s,i,r,a,h,n,l,o,u,g,d,c,f,x){this.data=[[t,e,s,i],[r,a,h,n],[l,o,u,g],[d,c,f,x]]}clone(){return new l(this.get(0,0),this.get(0,1),this.get(0,2),this.get(0,3),this.get(1,0),this.get(1,1),this.get(1,2),this.get(2,3),this.get(2,0),this.get(2,1),this.get(2,2),this.get(2,3),this.get(3,0),this.get(3,1),this.get(3,2),this.get(3,3))}static near(t,e,s){s||(s=h.Epsilon);for(let i=0;i<4;i++)for(let r=0;r<4;r++)if(Math.abs(t.get(i,r)-e.get(i,r))>s)return!1;return!0}static empty(){return new l(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}static identity(){return new l(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}set(t,e,s){this.data[t][e]=s}get(t,e){return this.data[t][e]}extractMat3(){return new r.default(this.get(0,0),this.get(0,1),this.get(0,2),this.get(1,0),this.get(1,1),this.get(1,2),this.get(2,0),this.get(2,1),this.get(2,2))}determinant(){return h.determinant4x4(this.get(0,0),this.get(0,1),this.get(0,2),this.get(0,3),this.get(1,0),this.get(1,1),this.get(1,2),this.get(1,3),this.get(2,0),this.get(2,1),this.get(2,2),this.get(2,3),this.get(3,0),this.get(3,1),this.get(3,2),this.get(3,3))}extractTranslation(){return new a.default(this.get(0,3),this.get(1,3),this.get(2,3))}transformPoint(t){let e=[0,0,0,0];for(let s=0;s<4;s++)e[s]+=this.get(s,0)*t.x,e[s]+=this.get(s,1)*t.y,e[s]+=this.get(s,2)*t.z,e[s]+=this.get(s,3);return new a.default(e[0]/e[3],e[1]/e[3],e[2]/e[3])}transformVector(t){let e=[0,0,0];for(let s=0;s<3;s++)e[s]+=this.get(s,0)*t.x,e[s]+=this.get(s,1)*t.y,e[s]+=this.get(s,2)*t.z;return new a.default(e[0],e[1],e[2])}postMulVec(t){let e=[0,0,0,0];for(let s=0;s<4;s++)e[s]+=this.get(s,0)*t.x,e[s]+=this.get(s,1)*t.y,e[s]+=this.get(s,2)*t.z,e[s]+=this.get(s,3)*t.w;return new n.default(e[0],e[1],e[2],e[3])}transpose(){return new l(this.get(0,0),this.get(1,0),this.get(2,0),this.get(3,0),this.get(0,1),this.get(1,1),this.get(2,1),this.get(3,1),this.get(0,2),this.get(1,2),this.get(2,2),this.get(3,2),this.get(0,3),this.get(1,3),this.get(2,3),this.get(3,3))}static scale(t,e){return t.scale(e)}scale(t,e){e||(e=this.clone());for(let s=0;s<4;s++)for(let i=0;i<4;i++)e.set(s,i,this.get(s,i)*t);return e}scaleSelf(t){return this.scale(t,this)}static mul(t,e){return t.mul(e)}mul(t,e){e||(e=this.clone());for(let s=0;s<4;s++)for(let i=0;i<4;i++){let r=0;r+=this.data[s][0]*t.data[0][i],r+=this.data[s][1]*t.data[1][i],r+=this.data[s][2]*t.data[2][i],r+=this.data[s][3]*t.data[3][i],e.set(s,i,r)}return e}mulSelf(t){return this.clone().mul(t,this)}static translation(t){return new l(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1)}static fromMat3(t){return new l(t.get(0,0),t.get(0,1),t.get(0,2),0,t.get(1,0),t.get(1,1),t.get(1,2),0,t.get(2,0),t.get(2,1),t.get(2,2),0,0,0,0,1)}static rotation(t){return t.toMat4()}static fromScale(t){return new l(t.x,0,0,0,0,t.y,0,0,0,0,t.z,0,0,0,0,1)}static fromTRS(t,e,s){let i=e.toMat3();return new l(i.get(0,0)*s.x,i.get(0,1)*s.y,i.get(0,2)*s.z,t.x,i.get(1,0)*s.x,i.get(1,1)*s.y,i.get(1,2)*s.z,t.y,i.get(2,0)*s.x,i.get(2,1)*s.y,i.get(2,2)*s.z,t.z,0,0,0,1)}inverse(){let t=this.determinant(),e=h.determinant3x3(this.get(1,1),this.get(1,2),this.get(1,3),this.get(2,1),this.get(2,2),this.get(2,3),this.get(3,1),this.get(3,2),this.get(3,3)),s=h.determinant3x3(this.get(1,0),this.get(1,2),this.get(1,3),this.get(2,0),this.get(2,2),this.get(2,3),this.get(3,0),this.get(3,2),this.get(3,3)),i=h.determinant3x3(this.get(1,0),this.get(1,1),this.get(1,3),this.get(2,0),this.get(2,1),this.get(2,3),this.get(3,0),this.get(3,1),this.get(3,3)),r=h.determinant3x3(this.get(1,0),this.get(1,1),this.get(1,2),this.get(2,0),this.get(2,1),this.get(2,2),this.get(3,0),this.get(3,1),this.get(3,2)),a=h.determinant3x3(this.get(0,1),this.get(0,2),this.get(0,3),this.get(2,1),this.get(2,2),this.get(2,3),this.get(3,1),this.get(3,2),this.get(3,3)),n=h.determinant3x3(this.get(0,0),this.get(0,2),this.get(0,3),this.get(2,0),this.get(2,2),this.get(2,3),this.get(3,0),this.get(3,2),this.get(3,3)),o=h.determinant3x3(this.get(0,0),this.get(0,1),this.get(0,3),this.get(2,0),this.get(2,1),this.get(2,3),this.get(3,0),this.get(3,1),this.get(3,3)),u=h.determinant3x3(this.get(0,0),this.get(0,1),this.get(0,2),this.get(2,0),this.get(2,1),this.get(2,2),this.get(3,0),this.get(3,1),this.get(3,2)),g=h.determinant3x3(this.get(0,1),this.get(0,2),this.get(0,3),this.get(1,1),this.get(1,2),this.get(1,3),this.get(3,1),this.get(3,2),this.get(3,3)),d=h.determinant3x3(this.get(0,0),this.get(0,2),this.get(0,3),this.get(1,0),this.get(1,2),this.get(1,3),this.get(3,0),this.get(3,2),this.get(3,3)),c=h.determinant3x3(this.get(0,0),this.get(0,1),this.get(0,3),this.get(1,0),this.get(1,1),this.get(1,3),this.get(3,0),this.get(3,1),this.get(3,3)),f=h.determinant3x3(this.get(0,0),this.get(0,1),this.get(0,2),this.get(1,0),this.get(1,1),this.get(1,2),this.get(3,0),this.get(3,1),this.get(3,2)),x=h.determinant3x3(this.get(0,1),this.get(0,2),this.get(0,3),this.get(1,1),this.get(1,2),this.get(1,3),this.get(2,1),this.get(2,2),this.get(2,3)),m=h.determinant3x3(this.get(0,0),this.get(0,2),this.get(0,3),this.get(1,0),this.get(1,2),this.get(1,3),this.get(2,0),this.get(2,2),this.get(2,3)),y=h.determinant3x3(this.get(0,0),this.get(0,1),this.get(0,3),this.get(1,0),this.get(1,1),this.get(1,3),this.get(2,0),this.get(2,1),this.get(2,3)),v=h.determinant3x3(this.get(0,0),this.get(0,1),this.get(0,2),this.get(1,0),this.get(1,1),this.get(1,2),this.get(2,0),this.get(2,1),this.get(2,2));return new l(e,-a,g,-x,-s,n,-d,m,i,-o,c,-y,-r,u,-f,v).scaleSelf(1/t)}toString(){return`[\n    [${this.get(0,0).toFixed(4)}, ${this.get(0,1).toFixed(4)}, ${this.get(0,2).toFixed(4)}, ${this.get(0,3).toFixed(4)}]\n    [${this.get(1,0).toFixed(4)}, ${this.get(1,1).toFixed(4)}, ${this.get(1,2).toFixed(4)}, ${this.get(1,3).toFixed(4)}]\n    [${this.get(2,0).toFixed(4)}, ${this.get(2,1).toFixed(4)}, ${this.get(2,2).toFixed(4)}, ${this.get(2,3).toFixed(4)}]\n    [${this.get(3,0).toFixed(4)}, ${this.get(3,1).toFixed(4)}, ${this.get(3,2).toFixed(4)}, ${this.get(3,3).toFixed(4)}]\n]`}}e.default=l},799:function(t,e,s){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=s(593),a=i(s(464));class h{constructor(t,e,s){this.data=t,this.w=e,this.h=s}static empty(t,e){let s;return(s=[]).length=t*e,s.fill(0),new h(s,t,e)}copy(){return new h(this.data.slice(),this.w,this.h)}clone(){return new h(this.data.slice(),this.w,this.h)}width(){return this.w}height(){return this.h}static identity(t){let e;(e=[]).length=t*t,e.fill(0);for(let s=0;s<t;s++)e[s+s*t]=1;return new h(e,t,t)}static mult(t,e){r.assert(t.w==e.h,"Matrix dimensions aren't compatible");let s=h.empty(e.w,t.h);for(let i=0;i<t.h;i++)for(let r=0;r<e.w;r++){let a=0;for(let s=0;s<t.w;s++)a+=t.get(i,s)*e.get(s,r);s.set(a,i,r)}return s}static multVec(t,e){r.assert(t.w==e.data.length,"Width of matrix isn't compatible with vector's length");let s=a.default.empty(t.h);for(let i=0;i<t.h;i++){let r=0;for(let s=0;s<t.w;s++)r+=t.get(i,s)*e.get(s);s.set(i,r)}return s}get(t,e){return this.data[t*this.w+e]}set(t,e,s){this.data[e*this.w+s]=t}transpose(){let t=[];for(let e=0;e<this.w;e++)for(let s=0;s<this.h;s++)t.push(this.data[e+s*this.w]);return new h(t,this.h,this.w)}static solve(t,e){r.assert(t.w==e.data.length,"Width of matrix isn't compatible with vector's length"),r.assert(t.w==t.h,"Non-square matrix");for(var s=e.size(),i=a.default.empty(s),h=new Array(s),n=0;n<s;n++)h[n]=n;for(var l=0;l<s;l++){var o=l;for(n=l+1;n<s;n++)Math.abs(t.get(h[n],l))>Math.abs(t.get(h[o],l))&&(o=n);if(o!=l){var u=h[l];h[l]=h[o],h[o]=u}if(Math.abs(t.get(h[l],l))<.001){for(n=0;n<s;n++)i.set(n,0);return i}for(n=l+1;n<s;n++)t.set(t.get(h[l],n)/t.get(h[l],l),h[l],n);for(e.set(h[l],e.get(h[l])/t.get(h[l],l)),t.set(1,h[l],l),n=l+1;n<s;n++){for(var g=l+1;g<s;g++)t.set(t.get(h[n],g)-t.get(h[n],l)*t.get(h[l],g),h[n],g);e.set(h[n],e.get(h[n])-t.get(h[n],l)*e.get(h[l])),t.set(0,h[n],l)}}for(i.set(s-1,e.get(h[s-1])),n=s-2;n>-1;n--){g=0;for(var d=n+1;d<s;d++)g+=t.get(h[n],d)*i.get(d);i.set(n,e.get(h[n])-g)}return i}inverse(){r.assert(this.w==this.h,"Non-square matrix");let t=this.copy();for(let e=0;e<this.w;e++){let s=a.default.empty(this.w);s.set(e,1);let i=h.solve(this.copy(),s);for(let s=0;s<this.h;s++)t.set(i.get(s),s,e)}return t}print(t){t||(t=4);let e="";for(let s=0;s<this.h;s++){e+=s>0?"\n| ":"| ";for(let i=0;i<this.w;i++)e+=this.data[i+s*this.w].toFixed(t)+" ";e+="|"}return e}}e.default=h},99:function(t,e,s){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=i(s(363)),a=i(s(658)),h=i(s(768)),n=s(593),l=i(s(872));class o{constructor(t,e){this.v=t,this.s=e}static fromVectors(t,e){let s=l.default.cross(t,e),i=l.default.dot(t,e)/t.l2norm()/e.l2norm();1-Math.abs(i)<=1e-4&&(s=new l.default(1,0,0));let a=Math.acos(i);return this.fromAxisAngle(new r.default(s,a))}clone(){return new o(this.v.clone(),this.s)}static near(t,e,s){return s||(s=n.Epsilon),Math.abs(t.s-e.s)<=s&&l.default.near(t.v,e.v,s)}static identity(){return new o(new l.default(0,0,0),1)}static empty(){return new o(l.default.empty(),0)}static fromAxisAngle(t){return new o(t.axis.normalized().scaleSelf(Math.sin(t.angle/2)),Math.cos(t.angle/2))}static fromComponents(t,e,s,i){return new o(new l.default(t,e,s),i)}static fromEulerAngles(t,e,s){let i=Math.cos(t/2),r=Math.sin(t/2),a=Math.cos(e/2),h=Math.sin(e/2),n=Math.cos(s/2),u=Math.sin(s/2);return new o(new l.default(r*a*n-i*h*u,i*h*n+r*a*u,i*a*u-r*h*n),i*a*n+r*h*u)}static fromMat3(t){return t.toQuat()}static add(t,e){return t.add(e)}add(t,e){return e||(e=this.clone()),this.v.add(t.v,e.v),e.s=this.s+t.s,e}addSelf(t){return this.add(t,this)}static sub(t,e){return t.sub(e)}sub(t,e){return e||(e=this.clone()),this.v.sub(t.v,e.v),e.s=this.s-t.s,e}subSelf(t){return this.sub(t,this)}conj(){return new o(new l.default(-this.v.x,-this.v.y,-this.v.z),this.s)}inverse(){return this.conj().scale(1/this.squaredLength())}static mul(t,e){return t.mul(e)}mul(t,e){e||(e=this.clone());const{x:s,y:i,z:r}=this.v,a=this.s;return e.s=a*t.s-s*t.v.x-i*t.v.y-r*t.v.z,e.v.x=a*t.v.x+s*t.s+i*t.v.z-r*t.v.y,e.v.y=a*t.v.y-s*t.v.z+i*t.s+r*t.v.x,e.v.z=a*t.v.z+s*t.v.y-i*t.v.x+r*t.s,e}mulSelf(t){return this.mul(t,this)}static div(t,e){return t.div(e)}div(t,e){return e||(e=this.clone()),e.s=this.s*t.s+l.default.dot(this.v,t.v),e.v=this.v.scale(t.s).subSelf(t.v.scale(this.s)).subSelf(l.default.cross(this.v,t.v)),e.scaleSelf(1/t.squaredLength())}divSelf(t){return this.div(t,this)}static scale(t,e){return t.scale(e)}scale(t,e){return e||(e=this.clone()),e.s=this.s*t,this.v.scale(t,e.v),e}scaleSelf(t){return this.scale(t,this)}normalize(){let t=this.l2norm();return this.scaleSelf(1/t)}normalized(){return this.clone().normalize()}toMat3(){const{x:t,y:e,z:s}=this.v,i=this.v.x*this.v.x,r=this.v.y*this.v.y,h=this.v.z*this.v.z;return new a.default(1-2*r-2*h,2*t*e-2*this.s*s,2*t*s+2*this.s*e,2*t*e+2*this.s*s,1-2*i-2*h,2*e*s-2*this.s*t,2*t*s-2*this.s*e,2*e*s+2*this.s*t,1-2*i-2*r)}toMat4(){const{x:t,y:e,z:s}=this.v,i=this.v.x*this.v.x,r=this.v.y*this.v.y,a=this.v.z*this.v.z;return new h.default(1-2*r-2*a,2*t*e-2*this.s*s,2*t*s+2*this.s*e,0,2*t*e+2*this.s*s,1-2*i-2*a,2*e*s-2*this.s*t,0,2*t*s-2*this.s*e,2*e*s+2*this.s*t,1-2*i-2*r,0,0,0,0,1)}toAxisAngle(){let t=2*Math.atan2(this.v.l2norm(),this.s);t=Math.abs(t)>Math.PI?2*Math.PI*Math.sign(t)-t:t;let e=this.v.clone().normalize();return Math.sqrt(1-this.s*this.s)<n.SmallEpsilon&&(e=new l.default(1,0,0)),new r.default(e,t)}toEulerAngles(){throw new Error("Not implemented")}rotate(t){return this.mul(new o(t.clone(),0)).mulSelf(this.conj()).v}l2norm(){return Math.sqrt(this.squaredLength())}squaredLength(){return this.v.squaredLength()+this.s*this.s}toString(){return`[${this.v.x.toFixed(4)}i, ${this.v.y.toFixed(4)}j, ${this.v.z.toFixed(4)}k, ${this.s.toFixed(4)}]`}}e.default=o},886:function(t,e,s){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=i(s(768)),a=i(s(99)),h=s(593),n=i(s(872));class l{constructor(t,e,s){this.translation=t,this.rotation=e,this.scale=s}hasUniformScale(){return h.near(this.scale.x,this.scale.y)&&h.near(this.scale.x,this.scale.z)&&h.near(this.scale.y,this.scale.z)}clone(){return new l(this.translation.clone(),this.rotation.clone(),this.scale.clone())}static identity(){return new l(new n.default(0,0,0),a.default.identity(),new n.default(1,1,1))}toAffine(){return r.default.fromTRS(this.translation,this.rotation,this.scale)}transformPoint(t){return this.rotation.rotate(n.default.mul(t,this.scale)).addSelf(this.translation)}transformVector(t){return this.rotation.rotate(n.default.mul(t,this.scale))}transformInversePoint(t){return this.rotation.inverse().rotate(n.default.sub(t,this.translation)).divSelf(this.scale)}transformInverseVector(t){return this.rotation.inverse().rotate(t).divSelf(this.scale)}inverse(){h.assert(this.hasUniformScale(),"can't inverse transform with non-uniform scale");let t=this.rotation.inverse();return new l(t.rotate(n.default.div(this.translation.inverse(),this.scale)),t,new n.default(1/this.scale.x,1/this.scale.y,1/this.scale.z))}toString(){return`{ t:${this.translation.toString()}, r:${this.rotation.toString()}, s:${this.scale.toString()} }`}}e.default=l},593:(t,e)=>{function s(t,e,s,i,r,a,h,n,l){return t*(r*l-a*n)-e*(i*l-h*a)+s*(i*n-h*r)}Object.defineProperty(e,"__esModule",{value:!0}),e.determinant4x4=e.determinant3x3=e.determinant2x2=e.lerp=e.near=e.clamp=e.degrees=e.radians=e.assert=e.SmallestEpsilon=e.SmallEpsilon=e.Epsilon=void 0,e.Epsilon=1e-4,e.SmallEpsilon=1e-6,e.SmallestEpsilon=1e-8,e.assert=function(t,e){if(!t)throw new Error(e)},e.radians=function(t){return t/180*Math.PI},e.degrees=function(t){return t/Math.PI*180},e.clamp=function(t,e,s){return Math.max(Math.min(t,s),e)},e.near=function(t,s,i){return i||(i=e.Epsilon),Math.abs(t-s)<=i},e.lerp=function(t,e,s){return e*s+t*(1-s)},e.determinant2x2=function(t,e,s,i){return t*i-e*s},e.determinant3x3=s,e.determinant4x4=function(t,e,i,r,a,h,n,l,o,u,g,d,c,f,x,m){return t*s(h,n,l,u,g,d,f,x,m)-e*s(a,n,l,o,g,d,c,x,m)+i*s(a,h,l,o,u,d,c,f,m)-r*s(a,h,n,o,u,g,c,f,x)}},760:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});const i=s(593);class r{constructor(t,e){this.x=t,this.y=e}static near(t,e,s){return s||(s=i.Epsilon),r.sub(t,e).lInfnorm()<=s}length(){return Math.sqrt(this.squaredLength())}squaredLength(){return this.x*this.x+this.y*this.y}l1norm(){return Math.max(Math.abs(this.x),Math.abs(this.y))}lInfnorm(){return Math.abs(this.x)+Math.abs(this.y)}lpnorm(t){return Math.pow(Math.pow(Math.abs(this.x),t)+Math.pow(Math.abs(this.y),t),1/t)}mul(t,e){return e||(e=this.clone()),e.x=this.x*t.x,e.y=this.y*t.y,e}div(t,e){return e||(e=this.clone()),e.x=this.x/t.x,e.y=this.y/t.y,e}add(t,e){return e||(e=this.clone()),e.x=this.x+t.x,e.y=this.y+t.y,e}sub(t,e){return e||(e=this.clone()),e.x=this.x-t.x,e.y=this.y-t.y,e}scale(t,e){return e||(e=this.clone()),e.x=this.x*t,e.y=this.y*t,e}mulSelf(t){return this.mul(t,this)}divSelf(t){return this.mul(t,this)}addSelf(t){return this.add(t,this)}subSelf(t){return this.sub(t,this)}scaleSelf(t){return this.scale(t,this)}static mul(t,e){return t.mul(e)}static div(t,e){return t.div(e)}static add(t,e){return t.add(e)}static sub(t,e){return t.sub(e)}static scale(t){return this.scale(t)}static dot(t,e){return t.x*e.x+t.y*e.y}static cross(t,e){return t.x*e.y-t.y*e.x}clone(){return new r(this.x,this.y)}}e.default=r},872:function(t,e,s){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=i(s(363)),a=s(593);class h{constructor(t,e,s){this.x=t,this.y=e,this.z=s}inverse(){return new h(this.x,this.y,this.z)}static lerp(t,e,s){return new h(a.lerp(t.x,e.x,s),a.lerp(t.y,e.y,s),a.lerp(t.z,e.z,s))}static near(t,e,s){return s||(s=a.Epsilon),h.sub(t,e).lInfnorm()<=s}static empty(){return new h(0,0,0)}clone(){return new h(this.x,this.y,this.z)}static scale(t,e){return t.scale(e)}scale(t,e){return e||(e=this.clone()),e.x=this.x*t,e.y=this.y*t,e.z=this.z*t,e}scaleSelf(t){return this.scale(t,this),this}static add(t,e){return t.add(e)}add(t,e){return e||(e=this.clone()),e.x=this.x+t.x,e.y=this.y+t.y,e.z=this.z+t.z,e}addSelf(t){return this.add(t,this)}static sub(t,e){return t.sub(e)}sub(t,e){return e||(e=this.clone()),e.x=this.x-t.x,e.y=this.y-t.y,e.z=this.z-t.z,e}subSelf(t){return this.sub(t,this)}mul(t,e){return e||(e=this.clone()),e.x=this.x*t.x,e.y=this.y*t.y,e.z=this.z*t.z,e}static mul(t,e){return t.mul(e)}mulSelf(t){return this.mul(t,this)}div(t,e){return e||(e=this.clone()),e.x=this.x/t.x,e.y=this.y/t.y,e.z=this.z/t.z,e}static div(t,e){return t.div(e)}divSelf(t){return this.div(t,this)}static dot(t,e){return t.x*e.x+t.y*e.y+t.z*e.z}dot(t){return h.dot(this,t)}static cross(t,e){return new h(t.y*e.z-t.z*e.y,-t.x*e.z+t.z*e.x,t.x*e.y-t.y*e.x)}cross(t){return h.cross(this,t)}normalize(){let t=this.l2norm();return this.scaleSelf(1/t)}normalized(){return this.clone().normalize()}lpnorm(t){return Math.pow(Math.pow(Math.abs(this.x),t)+Math.pow(Math.abs(this.y),t)+Math.pow(Math.abs(this.z),t),1/t)}l1norm(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}l2norm(){return Math.sqrt(this.squaredLength())}lInfnorm(){return Math.max(Math.abs(this.x),Math.max(Math.abs(this.y),Math.abs(this.z)))}length(){return this.l2norm()}squaredLength(){return this.x*this.x+this.y*this.y+this.z*this.z}toString(){return`[${this.x.toFixed(4)}, ${this.y.toFixed(4)}, ${this.z.toFixed(4)}]`}rotateEuler(t){let e=new r.default(new h(1,0,0),this.x),s=new r.default(new h(0,1,0),this.y);return new r.default(new h(0,0,1),this.z).rotate(s.rotate(e.rotate(t)))}}e.default=h},663:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t,e,s,i){this.x=t,this.y=e,this.z=s,this.w=i}}},464:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});const i=s(593);class r{constructor(t){this.data=t}copy(){return new r(this.data.slice())}clone(){return new r(this.data.slice())}static empty(t){let e;return(e=[]).length=t,e.fill(0),new r(e)}static dot(t,e){let s=0;for(let i=0;i<t.size();i++)s+=t.data[i]*e.data[i];return s}static add(t,e){let s=[];for(let i=0;i<t.data.length;i++)s.push(t.data[i]+e.data[i]);return new r(s)}static sub(t,e){let s=[];for(let i=0;i<t.data.length;i++)s.push(t.data[i]-e.data[i]);return new r(s)}static mul(t,e){let s=[];for(let i=0;i<t.data.length;i++)s.push(t.data[i]*e.data[i]);return new r(s)}static scale(t,e){let s=[];for(let i=0;i<t.data.length;i++)s.push(t.data[i]*e);return new r(s)}addSelf(t){for(let e=0;e<this.data.length;e++)this.data[e]+=t.data[e];return this}subSelf(t){for(let e=0;e<this.data.length;e++)this.data[e]-=t.data[e];return this}scaleSelf(t){for(let e=0;e<this.data.length;e++)this.data[e]*=t;return this}get(t){return this.data[t]}set(t,e){this.data[t]=e}size(){return this.data.length}getSubVector(t,e){let s=new Array(e);for(let i=0;i<e;i++)s[i]=this.data[t+i];return new r(s)}addSubVector(t,e){i.assert(this.size()==t.size()+e,"Vectors should have matching sizes");for(let s=0;s<t.size();s++)this.data[s+e]+=t.get(s);return this}subSubVector(t,e){i.assert(this.size()==t.size()+e,"Vectors should have matching sizes");for(let s=0;s<t.size();s++)this.data[s+e]-=t.get(s);return this}add(t,e){e||(e=this),i.assert(this.size()==t.size(),"Vectors should be of equal size");for(let s=0;s<this.data.length;s++)e.data[s]=this.data[s]+t.data[s];return e}sub(t,e){e||(e=this),i.assert(this.size()==t.size(),"Vectors should be of equal size");for(let s=0;s<this.data.length;s++)e.data[s]=this.data[s]-t.data[s];return e}mul(t,e){e||(e=this),i.assert(this.size()==t.size(),"Vectors should be of equal size");for(let s=0;s<this.data.length;s++)e.data[s]=this.data[s]*t.data[s];return e}scale(t,e){e||(e=this);for(let s=0;s<this.data.length;s++)e.data[s]=this.data[s]*t;return e}l1Norm(){let t=0;for(let e=0;e<this.data.length;e++)t+=Math.abs(this.data[e]);return t}l2Norm(){let t=0;for(let e=0;e<this.data.length;e++)t+=this.data[e]*this.data[e];return Math.sqrt(t)}lInfNorm(){let t=0;for(let e=0;e<this.data.length;e++)t=Math.max(Math.abs(this.data[e]));return t}norm2(){let t=0;for(let e=0;e<this.data.length;e++)t+=this.data[e]*this.data[e];return Math.sqrt(t)}clamp(t,e){for(let s=0;s<this.data.length;s++)this.data[s]=i.clamp(this.data[s],t.data[s],e.data[s])}clampScalar(t,e){for(let s=0;s<this.data.length;s++)this.data[s]=i.clamp(this.data[s],t,e)}print(t){t||(t=4);let e="[ ";return this.data.forEach((s=>e+=s.toFixed(t)+" ")),e+"]"}}e.default=r}},e={},s=function s(i){var r=e[i];if(void 0!==r)return r.exports;var a=e[i]={exports:{}};return t[i].call(a.exports,a,a.exports,s),a.exports}(607);math=s})();
//# sourceMappingURL=math-utils.min.js.map